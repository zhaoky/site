import{_ as s,c as i,o as a,U as h}from"./chunks/framework.6i15RKC2.js";const o=JSON.parse('{"title":"同一台电脑关于多个SSH KEY管理","description":"","frontmatter":{},"headers":[],"relativePath":"misc/273.md","filePath":"misc/273.md"}'),n={name:"misc/273.md"},t=h(`<h1 id="同一台电脑关于多个ssh-key管理" tabindex="-1">同一台电脑关于多个SSH KEY管理 <a class="header-anchor" href="#同一台电脑关于多个ssh-key管理" aria-label="Permalink to &quot;同一台电脑关于多个SSH KEY管理&quot;">​</a></h1><h2 id="比如有-aaa-bbb-ccc-三个帐号需要生成不同的-public-key" tabindex="-1">比如有 aaa,bbb,ccc 三个帐号需要生成不同的 PUBLIC KEY <a class="header-anchor" href="#比如有-aaa-bbb-ccc-三个帐号需要生成不同的-public-key" aria-label="Permalink to &quot;比如有 aaa,bbb,ccc 三个帐号需要生成不同的 PUBLIC KEY&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh-keygen</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -t</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Generating</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public/private</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rsa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pair.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/root/.ssh/id_rsa):/root/.ssh/id_rsa_aaa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> passphrase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (empty </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">for</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> no</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> passphrase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> same</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> passphrase</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> again:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> identification</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> saved</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/.ssh/id_rsa_aaa.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> saved</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/.ssh/id_rsa_aaa.pub.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fingerprint</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    9b:92:f6:1f:d2:72:bd:72:19:45:42:5f:e4:65:33:64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@AY140122145815620396Z</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key&#39;s randomart image is:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    +--[ RSA 2048]----+</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |           .. .E=|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |            ..o++|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |             o. .|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |              .  |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |        S    .   |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |       . + ..    |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |      + = + .o   |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |     . o +..o.   |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    |        ...o.    |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    +-----------------+</span></span></code></pre></div><p>我们在 <code>/root/.ssh/</code> 目录下创建 <code>id_rsa_aaa</code> 私钥 和 <code>id_rsa_aaa.pub</code> 公钥.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Enter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/root/.ssh/id_rsa):/root/.ssh/id_rsa_aaa  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#设置路径,如果不设置默认生成 id_rsa  和  id_rsa.pub</span></span></code></pre></div><h2 id="按照上面的步骤逐个生成-bbb-和-ccc-对应的公钥和私钥" tabindex="-1">按照上面的步骤逐个生成 bbb 和 ccc 对应的公钥和私钥 <a class="header-anchor" href="#按照上面的步骤逐个生成-bbb-和-ccc-对应的公钥和私钥" aria-label="Permalink to &quot;按照上面的步骤逐个生成 bbb 和 ccc 对应的公钥和私钥&quot;">​</a></h2><h2 id="查看系统-ssh-key-代理-执行如下命令" tabindex="-1">查看系统 ssh-key 代理,执行如下命令 <a class="header-anchor" href="#查看系统-ssh-key-代理-执行如下命令" aria-label="Permalink to &quot;查看系统 ssh-key 代理,执行如下命令&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    $</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh-add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Could</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> open</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> connection</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> authentication</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> agent.</span></span></code></pre></div><p>如果发现上面的提示,说明系统代理里没有任何 <code>key</code>,执行如下操作</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exec</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh-agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bash</span></span></code></pre></div><p>如果系统已经有 <code>ssh-key</code> 代理 ,执行下面的命令可以删除</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ssh-add</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre></div><h2 id="把-ssh-目录下的-3-个私钥添加的-ssh-agent" tabindex="-1">把 .ssh 目录下的 3 个私钥添加的 ssh-agent <a class="header-anchor" href="#把-ssh-目录下的-3-个私钥添加的-ssh-agent" aria-label="Permalink to &quot;把 .ssh 目录下的 3 个私钥添加的 ssh-agent&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ssh-add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa_aaa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ssh-add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa_bbb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ssh-add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa_ccc</span></span></code></pre></div><p>依次执行上面三条 <code>shell</code> 把三个私钥添加到 <code>ssh-key</code> 代理里面。</p><h2 id="打开-github-或者-开源中国-ssh-管理页面把-对应的公钥提交保存到代码管理服务器-pub-结尾" tabindex="-1">打开 github 或者 开源中国 ssh 管理页面把 对应的公钥提交保存到代码管理服务器 (.pub 结尾) <a class="header-anchor" href="#打开-github-或者-开源中国-ssh-管理页面把-对应的公钥提交保存到代码管理服务器-pub-结尾" aria-label="Permalink to &quot;打开 github 或者 开源中国 ssh 管理页面把 对应的公钥提交保存到代码管理服务器 (.pub 结尾)&quot;">​</a></h2><h2 id="在-ssh-目录创建-config-配置文件" tabindex="-1">在 .ssh 目录创建 config 配置文件 <a class="header-anchor" href="#在-ssh-目录创建-config-配置文件" aria-label="Permalink to &quot;在 .ssh 目录创建 config 配置文件&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    nano</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/config</span></span></code></pre></div><p>输入如下配置信息:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #aaa  (github 配置)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aaa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        HostName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> github.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        User</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        IdentityFile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa_aaa</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #bbb  (开源中国 配置)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    Host</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bbb</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        HostName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git.oschina.net</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        User</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        IdentityFile</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.ssh/id_rsa_bbb</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #ccc</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    ........</span></span></code></pre></div><h2 id="记住上面一步-host-里设置的别名-开始克隆项目-以开源中国为例" tabindex="-1">记住上面一步 Host 里设置的别名,开始克隆项目,以开源中国为例 <a class="header-anchor" href="#记住上面一步-host-里设置的别名-开始克隆项目-以开源中国为例" aria-label="Permalink to &quot;记住上面一步 Host 里设置的别名,开始克隆项目,以开源中国为例&quot;">​</a></h2><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@git.oschina.net:userName/projectName.git</span></span></code></pre></div><p>到此为止多个 <code>ssh-key</code> 已经可以同时使用.</p>`,23),p=[t];function l(e,k,F,d,r,c){return a(),i("div",null,p)}const y=s(n,[["render",l]]);export{o as __pageData,y as default};

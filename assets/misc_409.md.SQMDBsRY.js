import{_ as a,c as s,o as e,U as i}from"./chunks/framework.7BZ-Q4AH.js";const u=JSON.parse('{"title":"使用 patch-package 给 node_modules 打补丁","description":"","frontmatter":{},"headers":[],"relativePath":"misc/409.md","filePath":"misc/409.md"}'),t={name:"misc/409.md"},p=i(`<h1 id="使用-patch-package-给-node-modules-打补丁" tabindex="-1">使用 patch-package 给 node_modules 打补丁 <a class="header-anchor" href="#使用-patch-package-给-node-modules-打补丁" aria-label="Permalink to &quot;使用 patch-package 给 node_modules 打补丁&quot;">​</a></h1><h2 id="第一步" tabindex="-1">第一步 <a class="header-anchor" href="#第一步" aria-label="Permalink to &quot;第一步&quot;">​</a></h2><p>安装 <code>patch-package</code></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">yarn add patch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-package</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">D</span></span></code></pre></div><h2 id="第二步" tabindex="-1">第二步 <a class="header-anchor" href="#第二步" aria-label="Permalink to &quot;第二步&quot;">​</a></h2><p>修改 <code>npm</code> 包的代码后(如修改 <code>webpack</code>)，执行</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npx patch</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> webpack </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">yarn</span></span></code></pre></div><p><code>npm</code> 会在项目根目录下的 <code>patches</code> 目录中创建一个名为 <code>webpack+version.patch</code> 的文件，提交到 <code>git</code>。</p><h2 id="第三步" tabindex="-1">第三步 <a class="header-anchor" href="#第三步" aria-label="Permalink to &quot;第三步&quot;">​</a></h2><p><code>package.json</code> 的 <code>scripts</code> 中加入 <code>&quot;postinstall&quot;: &quot;patch-package&quot;</code></p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;postinstall&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;patch-package&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>在后续运行 yarn 时，便会自动为依赖包打上我们编写的补丁了。</p>`,12),n=[p];function h(o,c,l,d,k,r){return e(),s("div",null,n)}const E=a(t,[["render",h]]);export{u as __pageData,E as default};

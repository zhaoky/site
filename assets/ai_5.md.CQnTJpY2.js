import{_ as e,C as E,c as r,o as a,R as n,b as l,w as i,a as t,G as p,a1 as k}from"./chunks/framework.Dxoqk0BT.js";const C=JSON.parse('{"title":"前端自建 MCP 服务连接框架文档指南","description":"","frontmatter":{},"headers":[],"relativePath":"ai/5.md","filePath":"ai/5.md"}'),d={name:"ai/5.md"};function g(F,s,o,y,c,B){const h=E("Mermaid");return a(),r("div",null,[s[4]||(s[4]=n('<h1 id="前端自建-mcp-服务连接框架文档指南" tabindex="-1">前端自建 MCP 服务连接框架文档指南 <a class="header-anchor" href="#前端自建-mcp-服务连接框架文档指南" aria-label="Permalink to &quot;前端自建 MCP 服务连接框架文档指南&quot;">​</a></h1><p>本文基于《让 AI 更懂 Ant Design：MCP 协议在前端领域的落地实践》的技术方案，提供完整的前端自建 MCP 服务指南。</p><h2 id="什么是-mcp" tabindex="-1">什么是 MCP？ <a class="header-anchor" href="#什么是-mcp" aria-label="Permalink to &quot;什么是 MCP？&quot;">​</a></h2><p>MCP（Model Context Protocol）是一种让大语言模型获取特定领域知识的协议。通过 MCP，可以将框架文档、组件库信息等专业知识提供给 AI 助手，使其能够生成更准确、相关的代码。</p><h2 id="整体架构设计" tabindex="-1">整体架构设计 <a class="header-anchor" href="#整体架构设计" aria-label="Permalink to &quot;整体架构设计&quot;">​</a></h2>',5)),(a(),l(k,null,{default:i(()=>[p(h,{id:"mermaid-15",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E7%94%A8%E6%88%B7%E6%8F%90%E9%97%AE%5D%20--%3E%20B%5BAI%E5%AE%A2%E6%88%B7%E7%AB%AF%20Claude%2FCursor%E7%AD%89%5D%0A%20%20%20%20B%20--%3E%20C%5BMCP%20Server%5D%0A%20%20%20%20C%20--%3E%20D%5B%E6%96%87%E6%A1%A3%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%5D%0A%20%20%20%20D%20--%3E%20E%5B%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E4%B8%8E%E6%8F%90%E5%8F%96%5D%0A%20%20%20%20E%20--%3E%20F%5B%E6%A1%86%E6%9E%B6%E5%AE%98%E6%96%B9%E6%96%87%E6%A1%A3%5D%0A%20%20%20%20C%20--%3E%20G%5BTools%2FPrompt%2FResource%5D%0A%20%20%20%20G%20--%3E%20B%0A%20%20%20%20B%20--%3E%20H%5BAI%E6%A8%A1%E5%9E%8B%5D%0A%20%20%20%20H%20--%3E%20I%5B%E7%B2%BE%E5%87%86%E5%9B%9E%E7%AD%94%5D%0A"})]),fallback:i(()=>[...s[0]||(s[0]=[t(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=n(`<h2 id="实施步骤" tabindex="-1">实施步骤 <a class="header-anchor" href="#实施步骤" aria-label="Permalink to &quot;实施步骤&quot;">​</a></h2><h3 id="第一步-环境准备与技术选型" tabindex="-1">第一步：环境准备与技术选型 <a class="header-anchor" href="#第一步-环境准备与技术选型" aria-label="Permalink to &quot;第一步：环境准备与技术选型&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建 MCP 项目</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-framework-mcp</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-framework-mcp</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> init</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装必要依赖</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @modelcontextprotocol/sdk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cheerio</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> marked</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vfile-matter</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> typescript</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @types/node</span></span></code></pre></div><h3 id="第二步-文档数据提取方案" tabindex="-1">第二步：文档数据提取方案 <a class="header-anchor" href="#第二步-文档数据提取方案" aria-label="Permalink to &quot;第二步：文档数据提取方案&quot;">​</a></h3>`,4)),(a(),l(k,null,{default:i(()=>[p(h,{id:"mermaid-26",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5B%E6%A1%86%E6%9E%B6%E5%AE%98%E6%96%B9%E4%BB%93%E5%BA%93%5D%20--%3E%20B%5B%E6%96%87%E6%A1%A3%E6%8F%90%E5%8F%96%E5%B7%A5%E5%85%B7%5D%0A%20%20%20%20B%20--%3E%20C%5B%E7%BB%84%E4%BB%B6%E5%88%97%E8%A1%A8JSON%5D%0A%20%20%20%20B%20--%3E%20D%5B%E7%BB%84%E4%BB%B6%E6%96%87%E6%A1%A3Markdown%5D%0A%20%20%20%20B%20--%3E%20E%5BAPI%E6%96%87%E6%A1%A3%5D%0A%20%20%20%20B%20--%3E%20F%5B%E7%A4%BA%E4%BE%8B%E4%BB%A3%E7%A0%81%E9%9B%86%5D%0A%20%20%20%20B%20--%3E%20G%5B%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97%5D%0A%20%20%20%20C%20--%3E%20H%5B%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%5D%0A%20%20%20%20D%20--%3E%20H%0A%20%20%20%20E%20--%3E%20H%0A%20%20%20%20F%20--%3E%20H%0A%20%20%20%20G%20--%3E%20H%0A"})]),fallback:i(()=>[...s[1]||(s[1]=[t(" Loading... ",-1)])]),_:1})),s[6]||(s[6]=n(`<h3 id="文档提取工具实现" tabindex="-1">文档提取工具实现 <a class="header-anchor" href="#文档提取工具实现" aria-label="Permalink to &quot;文档提取工具实现&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// extractor.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> matter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;vfile-matter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FrameworkExtractor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> repoPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 提取组件列表</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> extractComponentList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> componentsDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.repoPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;components&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> components</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> componentName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(componentsDir)) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> componentPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(componentsDir, componentName);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">statSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(componentPath).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> meta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">extractComponentMeta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(componentName);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        components.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(meta);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> components;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 提取组件文档</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> extractComponentDocs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">componentName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> docPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.repoPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;components&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, componentName, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;index.md&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">optimizeContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(docPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // 优化内容节省token</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> optimizeContent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">content</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 移除元数据、空行、样式等无用内容</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> content</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">---</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">[\\s\\S]</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*?</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">---</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n\\s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">g</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">trim</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="第三步-mcp-server-开发" tabindex="-1">第三步：MCP Server 开发 <a class="header-anchor" href="#第三步-mcp-server-开发" aria-label="Permalink to &quot;第三步：MCP Server 开发&quot;">​</a></h3><h4 id="mcp-服务核心结构" tabindex="-1">MCP 服务核心结构 <a class="header-anchor" href="#mcp-服务核心结构" aria-label="Permalink to &quot;MCP 服务核心结构&quot;">​</a></h4>`,4)),(a(),l(k,null,{default:i(()=>[p(h,{id:"mermaid-37",class:"mermaid",graph:"classDiagram%0A%20%20%20%20class%20MCPClient%20%7B%0A%20%20%20%20%20%20%20%20%2BhandleRequest()%0A%20%20%20%20%20%20%20%20%2BregisterTools()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20ToolsManager%20%7B%0A%20%20%20%20%20%20%20%20%2BgetComponentList()%0A%20%20%20%20%20%20%20%20%2BgetComponentDocs()%0A%20%20%20%20%20%20%20%20%2BgetComponentExamples()%0A%20%20%20%20%20%20%20%20%2BgetComponentChangelog()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20DataCache%20%7B%0A%20%20%20%20%20%20%20%20%2BgetFromCache()%0A%20%20%20%20%20%20%20%20%2BsetToCache()%0A%20%20%20%20%7D%0A%0A%20%20%20%20class%20DocumentExtractor%20%7B%0A%20%20%20%20%20%20%20%20%2BextractData()%0A%20%20%20%20%7D%0A%0A%20%20%20%20MCPClient%20--%3E%20ToolsManager%0A%20%20%20%20ToolsManager%20--%3E%20DataCache%0A%20%20%20%20ToolsManager%20--%3E%20DocumentExtractor%0A"})]),fallback:i(()=>[...s[2]||(s[2]=[t(" Loading... ",-1)])]),_:1})),s[7]||(s[7]=n(`<h4 id="mcp-服务实现" tabindex="-1">MCP 服务实现 <a class="header-anchor" href="#mcp-服务实现" aria-label="Permalink to &quot;MCP 服务实现&quot;">​</a></h4><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// server.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Server } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@modelcontextprotocol/sdk/server&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { McpServer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@modelcontextprotocol/sdk&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> FrameworkMCPServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McpServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.server </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McpServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      name: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my-framework-mcp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      version: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1.0.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> registerTools</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 工具1: 获取组件列表</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;get_component_list&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { componentType: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;string?&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">componentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> components</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getComponentList</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(componentType);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        content: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, text: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(components) }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 工具2: 获取组件文档</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;get_component_docs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { componentName: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;string&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">componentName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> docs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getComponentDocs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(componentName);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        content: [{ type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;text&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, text: docs }],</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // 更多工具...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  async</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="第四步-prompt-设计优化" tabindex="-1">第四步：Prompt 设计优化 <a class="header-anchor" href="#第四步-prompt-设计优化" aria-label="Permalink to &quot;第四步：Prompt 设计优化&quot;">​</a></h3><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 系统提示词设计</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> SYSTEM_PROMPTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  systemDescription: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`# 角色设定</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">你是一个专业的\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">frameworkName</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}组件库专家助手，专注于提供准确、高效的组件技术支持。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">## 技能</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">### 组件查询 - 快速检索和列出所有可用组件</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">### 文档解析 - 精确获取组件的props、API和用法说明</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">### 代码示例查询 - 精确获取组件的代码示例</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">### 代码生成 - 提供完整可运行的代码示例</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">### 版本追踪 - 查询组件的更新历史和变更内容</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">## 规则</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1. 上下文优先：优先使用已有对话信息</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2. 精确匹配：组件名称和props必须与官方文档一致</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3. 最小工具调用：避免重复查询</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4. 完整示例：代码必须包含完整上下文\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><h3 id="第五步-客户端配置" tabindex="-1">第五步：客户端配置 <a class="header-anchor" href="#第五步-客户端配置" aria-label="Permalink to &quot;第五步：客户端配置&quot;">​</a></h3><h4 id="claude-desktop-配置" tabindex="-1">Claude Desktop 配置 <a class="header-anchor" href="#claude-desktop-配置" aria-label="Permalink to &quot;Claude Desktop 配置&quot;">​</a></h4><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// claude_desktop_config.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;mcpServers&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;My Framework Components&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npx&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;args&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-framework-mcp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="第六步-数据处理优化策略" tabindex="-1">第六步：数据处理优化策略 <a class="header-anchor" href="#第六步-数据处理优化策略" aria-label="Permalink to &quot;第六步：数据处理优化策略&quot;">​</a></h3>`,8)),(a(),l(k,null,{default:i(()=>[p(h,{id:"mermaid-56",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5B%E5%8E%9F%E5%A7%8B%E6%96%87%E6%A1%A3%5D%20--%3E%20B%5B%E5%86%85%E5%AE%B9%E8%BF%87%E6%BB%A4%5D%0A%20%20%20%20B%20--%3E%20C%5BToken%E4%BC%98%E5%8C%96%5D%0A%20%20%20%20C%20--%3E%20D%5B%E7%BC%93%E5%AD%98%E5%A4%84%E7%90%86%5D%0A%20%20%20%20D%20--%3E%20E%5B%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%5D%0A%20%20%20%20E%20--%3E%20F%5B%E4%BC%98%E5%8C%96%E5%90%8E%E6%95%B0%E6%8D%AE%5D%0A%0A%20%20%20%20subgraph%20%E8%BF%87%E6%BB%A4%E7%AD%96%E7%95%A5%0A%20%20%20%20%20%20%20%20B1%5B%E7%A7%BB%E9%99%A4%E5%85%83%E6%95%B0%E6%8D%AE%5D%0A%20%20%20%20%20%20%20%20B2%5B%E5%88%A0%E9%99%A4%E7%A9%BA%E8%A1%8C%5D%0A%20%20%20%20%20%20%20%20B3%5B%E8%BF%87%E6%BB%A4%E6%A0%B7%E5%BC%8F%5D%0A%20%20%20%20%20%20%20%20B4%5B%E4%BF%9D%E7%95%99%E6%A0%B8%E5%BF%83%E5%86%85%E5%AE%B9%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20%E7%BC%93%E5%AD%98%E7%AD%96%E7%95%A5%0A%20%20%20%20%20%20%20%20D1%5B%E5%86%85%E5%AD%98%E7%BC%93%E5%AD%98%5D%0A%20%20%20%20%20%20%20%20D2%5B%E6%96%87%E4%BB%B6%E7%BC%93%E5%AD%98%5D%0A%20%20%20%20%20%20%20%20D3%5B%E7%BC%93%E5%AD%98%E5%A4%B1%E6%95%88%E6%9C%BA%E5%88%B6%5D%0A%20%20%20%20end%0A"})]),fallback:i(()=>[...s[3]||(s[3]=[t(" Loading... ",-1)])]),_:1})),s[8]||(s[8]=n('<h2 id="最佳实践建议" tabindex="-1">最佳实践建议 <a class="header-anchor" href="#最佳实践建议" aria-label="Permalink to &quot;最佳实践建议&quot;">​</a></h2><ul><li><strong>数据版本管理</strong>：为每个框架版本维护独立的文档数据</li><li><strong>缓存策略</strong>：实现多级缓存减少 IO 操作</li><li><strong>Token 优化</strong>：定期使用 OpenAI Tokenizer 检查内容长度</li><li><strong>错误处理</strong>：完善的错误处理和降级方案</li><li><strong>性能监控</strong>：添加性能指标和日志记录</li></ul><h2 id="扩展可能性" tabindex="-1">扩展可能性 <a class="header-anchor" href="#扩展可能性" aria-label="Permalink to &quot;扩展可能性&quot;">​</a></h2><ul><li><strong>多框架支持</strong>：适配 Ant Design、Element UI、Material UI 等流行框架</li><li><strong>实时更新</strong>：监控框架更新自动提取最新文档</li><li><strong>自定义扩展</strong>：支持团队内部组件库的集成</li><li><strong>性能分析</strong>：添加使用统计和性能分析功能</li></ul><h2 id="总结" tabindex="-1">总结 <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;总结&quot;">​</a></h2><p>通过自建 MCP 服务，可以将任何前端框架的文档知识集成到 AI 助手中，显著提升开发效率和代码质量。关键在于：</p><ol><li><strong>完整的数据提取方案</strong></li><li><strong>高效的 MCP Tools 设计</strong></li><li><strong>智能的 Prompt 优化</strong></li><li><strong>性能优化的实现</strong></li></ol><p>这种方案不仅适用于组件库，也可以扩展到 API 文档、设计系统、业务规范等任何需要 AI 辅助的领域。</p>',8))])}const D=e(d,[["render",g]]);export{C as __pageData,D as default};

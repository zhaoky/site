import{_ as o,C as p,c as A,o as t,R as l,b as e,k as i,w as E,a,G as r,a1 as h}from"./chunks/framework.Dxoqk0BT.js";const D=JSON.parse('{"title":"AI Agent 构建实战指南详解","description":"","frontmatter":{},"headers":[],"relativePath":"ai/6.md","filePath":"ai/6.md"}'),k={name:"ai/6.md"};function B(g,s,d,F,u,y){const n=p("Mermaid");return t(),A("div",null,[s[10]||(s[10]=l('<h1 id="ai-agent-构建实战指南详解" tabindex="-1">AI Agent 构建实战指南详解 <a class="header-anchor" href="#ai-agent-构建实战指南详解" aria-label="Permalink to &quot;AI Agent 构建实战指南详解&quot;">​</a></h1><p>好的，我们来对这篇 <strong>《AI Agent 构建实战指南》</strong> 进行终极详细的、原子级的拆解。这篇文章的价值在于它将抽象的 AI 能力转化为可工程化的<strong>具体组件、设计模式和最佳实践</strong>。</p><p>为了让您彻底掌握其精髓，我将构建一个完整的<strong>AI Agent 架构图</strong>，并逐一拆解每个模块的技术细节、实现方法和设计考量。</p><h2 id="全局架构总览-一个成熟-ai-agent-系统的核心组件" tabindex="-1">全局架构总览：一个成熟 AI Agent 系统的核心组件 <a class="header-anchor" href="#全局架构总览-一个成熟-ai-agent-系统的核心组件" aria-label="Permalink to &quot;全局架构总览：一个成熟 AI Agent 系统的核心组件&quot;">​</a></h2><p>首先，我们通过下面这张图俯瞰一个完整 AI Agent 系统的全貌，它集成了指南中提到的所有核心模块：</p>',5)),(t(),e(h,null,{default:E(()=>[r(n,{id:"mermaid-15",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20User%5B%E7%94%A8%E6%88%B7%2F%E7%B3%BB%E7%BB%9F%E8%BE%93%E5%85%A5%5D%20--%3E%20InputParser%5B%E8%BE%93%E5%85%A5%E8%A7%A3%E6%9E%90%E5%99%A8%5D%0A%0A%20%20%20%20subgraph%20OrchestrationLayer%20%5B%E7%BC%96%E6%8E%92%E4%B8%8E%E6%8E%A7%E5%88%B6%E5%B1%82%5D%0A%20%20%20%20%20%20%20%20AgentOrchestrator%5B%E6%99%BA%E8%83%BD%E4%BD%93%E5%8D%8F%E8%B0%83%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20PlanExecutor%5B%E8%AE%A1%E5%88%92%E6%89%A7%E8%A1%8C%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20MemoryManager%5B%E8%AE%B0%E5%BF%86%E7%AE%A1%E7%90%86%E5%99%A8%3Cbr%3E%E7%9F%AD%E6%9C%9F%2F%E9%95%BF%E6%9C%9F%E8%AE%B0%E5%BF%86%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20ReasoningLayer%20%5B%E6%8E%A8%E7%90%86%E4%B8%8E%E5%86%B3%E7%AD%96%E5%B1%82%5D%0A%20%20%20%20%20%20%20%20Router%5B%E6%8F%90%E7%A4%BA%E8%AF%8D%E8%B7%AF%E7%94%B1%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20CoT%5B%E6%80%9D%E7%BB%B4%E9%93%BE%E7%AE%A1%E7%90%86%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20Reasoner%5B%E6%8E%A8%E7%90%86%E5%BC%95%E6%93%8E%3Cbr%3E%E6%A0%B8%E5%BF%83LLM%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20DataLayer%20%5B%E6%95%B0%E6%8D%AE%E4%B8%8E%E7%9F%A5%E8%AF%86%E5%B1%82%5D%0A%20%20%20%20%20%20%20%20KnowledgeBase%5B(%E7%9F%A5%E8%AF%86%E5%BA%93)%5D%0A%20%20%20%20%20%20%20%20Retriever%5B%E6%A3%80%E7%B4%A2%E5%99%A8%3Cbr%3E%E8%AF%AD%E4%B9%89%2F%E5%85%B3%E9%94%AE%E8%AF%8D%2F%E6%B7%B7%E5%90%88%5D%0A%20%20%20%20%20%20%20%20Embedder%5B%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B%5D%0A%20%20%20%20end%0A%0A%20%20%20%20subgraph%20ToolsLayer%20%5B%E5%B7%A5%E5%85%B7%E4%B8%8E%E6%89%A7%E8%A1%8C%E5%B1%82%5D%0A%20%20%20%20%20%20%20%20ToolsManager%5B%E5%B7%A5%E5%85%B7%E7%AE%A1%E7%90%86%E5%99%A8%3Cbr%3EMCP%20Client%5D%0A%20%20%20%20%20%20%20%20Tool1%5B%E5%B7%A5%E5%85%B7%201%3Cbr%3Ee.g.%2C%20%E6%89%A7%E8%A1%8C%E4%BB%A3%E7%A0%81%5D%0A%20%20%20%20%20%20%20%20Tool2%5B%E5%B7%A5%E5%85%B7%202%3Cbr%3Ee.g.%2C%20%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%BA%93%5D%0A%20%20%20%20%20%20%20%20Tool3%5B%E5%B7%A5%E5%85%B7%20N%3Cbr%3E...%5D%0A%20%20%20%20end%0A%0A%20%20%20%20InputParser%20--%3E%20Router%0A%20%20%20%20Router%20--%3E%20CoT%0A%20%20%20%20CoT%20--%3E%20Reasoner%0A%0A%20%20%20%20Reasoner%20--%20%E9%9C%80%E8%A6%81%E7%9F%A5%E8%AF%86%20--%3E%20Retriever%0A%20%20%20%20Retriever%20--%20%E6%9F%A5%E8%AF%A2%20--%3E%20KnowledgeBase%0A%20%20%20%20KnowledgeBase%20--%20%E8%BF%94%E5%9B%9E%E4%B8%8A%E4%B8%8B%E6%96%87%20--%3E%20Reasoner%0A%0A%20%20%20%20Reasoner%20--%20%E9%9C%80%E8%A6%81%E8%A1%8C%E5%8A%A8%20--%3E%20ToolsManager%0A%20%20%20%20ToolsManager%20--%3E%20Tool1%0A%20%20%20%20Tool1%20--%20%E8%A1%8C%E5%8A%A8%E7%BB%93%E6%9E%9C%20--%3E%20Reasoner%0A%0A%20%20%20%20Reasoner%20%3C--%3E%20MemoryManager%0A%20%20%20%20MemoryManager%20%3C--%3E%20OrchestrationLayer%0A%0A%20%20%20%20OrchestrationLayer%20--%3E%20Output%5B%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%5D%0A"})]),fallback:E(()=>[...s[0]||(s[0]=[a(" Loading... ",-1)])]),_:1})),s[11]||(s[11]=i("p",null,"上图展示了一个工业级 AI Agent 的完整技术栈。接下来，我们像拆解精密仪器一样，深入每一个模块。",-1)),s[12]||(s[12]=i("hr",null,null,-1)),s[13]||(s[13]=i("h3",{id:"模块一-结构化提示词工程-深度拆解",tabindex:"-1"},[a("模块一：结构化提示词工程 - 深度拆解 "),i("a",{class:"header-anchor",href:"#模块一-结构化提示词工程-深度拆解","aria-label":'Permalink to "模块一：结构化提示词工程 - 深度拆解"'},"​")],-1)),s[14]||(s[14]=i("p",null,"这是控制 LLM 行为的“编程语言”，其复杂度和精细度远超简单问答。",-1)),s[15]||(s[15]=i("h4",{id:"_1-1-提示链-chain-of-thought-的工程实现",tabindex:"-1"},[a("1.1 提示链 (Chain-of-Thought) 的工程实现 "),i("a",{class:"header-anchor",href:"#_1-1-提示链-chain-of-thought-的工程实现","aria-label":'Permalink to "1.1 提示链 (Chain-of-Thought) 的工程实现"'},"​")],-1)),s[16]||(s[16]=i("p",null,[a("不仅仅是概念，而是需要实现的"),i("strong",null,"具体模式"),a("。")],-1)),(t(),e(h,null,{default:E(()=>[r(n,{id:"mermaid-32",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20A%5B%E5%8E%9F%E5%A7%8B%E4%BB%BB%E5%8A%A1%5D%20--%3E%20B%5B%E4%BB%BB%E5%8A%A1%E5%88%86%E8%A7%A3%E5%99%A8%3Cbr%3E%E4%BD%BF%E7%94%A8LLM%E6%88%96%E9%A2%84%E5%AE%9A%E4%B9%89%E8%A7%84%E5%88%99%5D%0A%20%20%20%20B%20--%3E%20C%5B%E5%AD%90%E4%BB%BB%E5%8A%A11%E6%8F%90%E7%A4%BA%E8%AF%8D%5D%0A%20%20%20%20B%20--%3E%20D%5B%E5%AD%90%E4%BB%BB%E5%8A%A12%E6%8F%90%E7%A4%BA%E8%AF%8D%5D%0A%20%20%20%20B%20--%3E%20E%5B%E5%AD%90%E4%BB%BB%E5%8A%A1...%5D%0A%20%20%20%20C%20--%3E%20F%5B%E6%89%A7%E8%A1%8CLLM%E8%B0%83%E7%94%A8%5D%0A%20%20%20%20D%20--%3E%20G%5B%E6%89%A7%E8%A1%8CLLM%E8%B0%83%E7%94%A8%5D%0A%20%20%20%20E%20--%3E%20H%5B%E6%89%A7%E8%A1%8CLLM%E8%B0%83%E7%94%A8%5D%0A%20%20%20%20F%20--%3E%20I%5B%E7%BB%93%E6%9E%9C1%5D%0A%20%20%20%20G%20--%3E%20J%5B%E7%BB%93%E6%9E%9C2%5D%0A%20%20%20%20H%20--%3E%20K%5B%E7%BB%93%E6%9E%9C...%5D%0A%20%20%20%20I%20%26%20J%20%26%20K%20--%3E%20L%5B%E7%BB%93%E6%9E%9C%E8%81%9A%E5%90%88%E5%99%A8%3Cbr%3E%E7%BB%84%E5%90%88%E6%9C%80%E7%BB%88%E8%BE%93%E5%87%BA%5D%0A%20%20%20%20L%20--%3E%20M%5B%E6%9C%80%E7%BB%88%E7%AD%94%E6%A1%88%5D%0A"})]),fallback:E(()=>[...s[1]||(s[1]=[a(" Loading... ",-1)])]),_:1})),s[17]||(s[17]=l(`<p><strong>关键技术点:</strong></p><ul><li><strong>任务分解策略</strong>: 可以是<strong>静态模板</strong>（固定步骤）、<strong>LLM 动态分解</strong>（让 LLM 自己规划步骤）或<strong>两者结合</strong>。</li><li><strong>上下文传递</strong>: 如何将子任务 1 的结果<code>\${result1}</code>作为变量嵌入到子任务 2 的提示词中。</li><li><strong>错误处理</strong>: 某个子步骤失败时，是重试、跳过还是报错？需要有<strong>断路机制</strong>。</li></ul><h4 id="_1-2-提示路由-router-的详细设计" tabindex="-1">1.2 提示路由 (Router) 的详细设计 <a class="header-anchor" href="#_1-2-提示路由-router-的详细设计" aria-label="Permalink to &quot;1.2 提示路由 (Router) 的详细设计&quot;">​</a></h4><p>其本质是一个<strong>分类器</strong>，将输入分配到不同的处理管道。</p><p><strong>实现方案对比:</strong></p><table><thead><tr><th style="text-align:left;">方案</th><th style="text-align:left;">实现方式</th><th style="text-align:left;">优点</th><th style="text-align:left;">缺点</th><th style="text-align:left;">适用场景</th></tr></thead><tbody><tr><td style="text-align:left;"><strong>规则路由</strong></td><td style="text-align:left;">基于关键词、正则表达式</td><td style="text-align:left;">简单、快速、稳定</td><td style="text-align:left;">灵活性差，无法处理新意图</td><td style="text-align:left;">简单、固定的任务类型</td></tr><tr><td style="text-align:left;"><strong>LLM 路由</strong></td><td style="text-align:left;">使用小 LLM 或大 LLM 进行意图识别</td><td style="text-align:left;">极其灵活，能理解细微差别</td><td style="text-align:left;">延迟高，成本高，可能出错</td><td style="text-align:left;">复杂、开放的对话场景</td></tr><tr><td style="text-align:left;"><strong>混合路由</strong></td><td style="text-align:left;">先规则匹配，失败再走 LLM</td><td style="text-align:left;">兼顾效率和覆盖率</td><td style="text-align:left;">系统复杂度增加</td><td style="text-align:left;">大多数生产环境</td></tr></tbody></table><p><strong>示例提示词 (LLM 路由):</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 系统提示词</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">你是一个路由助手。请分析用户的输入，并将其分类到以下选项之一：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;general_qa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: 一般知识问答，如“太阳为什么是圆的？”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;code_analysis&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: 代码相关，如“解释这段Python代码”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;command&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: 需要执行命令，如“请帮我重启服务”</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;unknown&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: 无法识别</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">请只输出类别名称，不要输出其他任何内容。</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">用户输入: </span><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;--shiki-light-font-style:italic;--shiki-dark-font-style:italic;">$</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{user_input}</span></span></code></pre></div><h4 id="_1-3-结构化输出的严格约束" tabindex="-1">1.3 结构化输出的严格约束 <a class="header-anchor" href="#_1-3-结构化输出的严格约束" aria-label="Permalink to &quot;1.3 结构化输出的严格约束&quot;">​</a></h4><p>这是实现<strong>LLM 与程序自动化集成</strong>的关键。必须使用 LLM 提供的结构化输出功能（如 OpenAI 的<code>response_format={ &quot;type&quot;: &quot;json_object&quot; }</code>）。</p><p><strong>高级技巧：JSON Schema 约束</strong> 不仅可以要求输出 JSON，还可以规定 JSON 的<strong>具体结构、字段类型和枚举值</strong>，极大提升输出稳定性。</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 提示词示例</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">请生成一个关于诗人的简介。输出必须严格遵守以下JSON Schema定义：</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;$schema&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://json-schema.org/draft-07/schema#&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;dynasty&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;representative_works&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;array&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      &quot;items&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;overview&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: { </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;string&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;required&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dynasty&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;overview&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">诗人：李白</span></span></code></pre></div><hr><h3 id="模块二-上下文工程与知识检索-深度拆解" tabindex="-1">模块二：上下文工程与知识检索 - 深度拆解 <a class="header-anchor" href="#模块二-上下文工程与知识检索-深度拆解" aria-label="Permalink to &quot;模块二：上下文工程与知识检索 - 深度拆解&quot;">​</a></h3><p>RAG 不是简单的“搜索-&gt;回答”，而是一个需要精细调优的<strong>搜索引擎系统</strong>。</p><h4 id="_2-1-rag-管道全流程及瓶颈分析" tabindex="-1">2.1 RAG 管道全流程及瓶颈分析 <a class="header-anchor" href="#_2-1-rag-管道全流程及瓶颈分析" aria-label="Permalink to &quot;2.1 RAG 管道全流程及瓶颈分析&quot;">​</a></h4><p>一个生产级的 RAG 包含多个环节，每个环节都有其优化点：</p>`,17)),(t(),e(h,null,{default:E(()=>[r(n,{id:"mermaid-163",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E7%94%A8%E6%88%B7%E9%97%AE%E9%A2%98%5D%20--%3E%20B%5B%E6%9F%A5%E8%AF%A2%E7%90%86%E8%A7%A3%2F%E6%94%B9%E5%86%99%3Cbr%3E%E4%BC%98%E5%8C%96%E6%9F%A5%E8%AF%A2%E8%AF%8D%5D%0A%20%20%20%20B%20--%3E%20C%5B%E6%A3%80%E7%B4%A2%E5%99%A8%5D%0A%20%20%20%20C%20--%3E%20D%5B%E5%90%91%E9%87%8F%E5%8C%96%3Cbr%3E%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B%E9%80%89%E6%8B%A9%5D%0A%20%20%20%20D%20--%3E%20E%5B%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%5D%0A%20%20%20%20E%20--%3E%20F%5B%E6%8E%92%E5%BA%8F%2F%E9%87%8D%E6%8E%92%3Cbr%3EMMR%E3%80%81%E7%9B%B8%E4%BC%BC%E5%BA%A6%E5%BE%97%E5%88%86%5D%0A%20%20%20%20F%20--%3E%20G%5B%E9%A1%B6%E9%83%A8K%E4%B8%AA%E7%89%87%E6%AE%B5%5D%0A%20%20%20%20G%20--%3E%20H%5B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8E%8B%E7%BC%A9%3Cbr%3E%E6%8F%90%E7%82%BC%E5%85%B3%E9%94%AE%E4%BF%A1%E6%81%AF%5D%0A%20%20%20%20H%20--%3E%20I%5B%E6%9E%84%E9%80%A0%E6%9C%80%E7%BB%88%E6%8F%90%E7%A4%BA%E8%AF%8D%5D%0A%20%20%20%20I%20--%3E%20J%5BLLM%E7%94%9F%E6%88%90%E7%AD%94%E6%A1%88%5D%0A%20%20%20%20J%20--%3E%20K%5B%E8%BE%93%E5%87%BA%5D%0A%0A%20%20%20%20subgraph%20Bottlenecks%20%5B%E5%B8%B8%E8%A7%81%E7%93%B6%E9%A2%88%E4%B8%8E%E4%BC%98%E5%8C%96%E7%82%B9%5D%0A%20%20%20%20%20%20%20%20L%5B%E6%9F%A5%E8%AF%A2%E4%B8%8D%E5%87%86%E7%A1%AE%3Cbr%3E%E2%86%92%20%E6%9F%A5%E8%AF%A2%E6%89%A9%E5%B1%95%2F%E6%94%B9%E5%86%99%5D%0A%20%20%20%20%20%20%20%20M%5B%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B%E5%B7%AE%3Cbr%3E%E2%86%92%20%E9%80%89%E6%8B%A9%E4%B8%93%E7%94%A8%E6%A8%A1%E5%9E%8B%5D%0A%20%20%20%20%20%20%20%20N%5B%E6%A3%80%E7%B4%A2%E7%B2%BE%E5%BA%A6%E4%BD%8E%3Cbr%3E%E2%86%92%20%E8%B0%83%E4%BC%98%E6%A3%80%E7%B4%A2%E7%AD%96%E7%95%A5%5D%0A%20%20%20%20%20%20%20%20O%5B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%86%97%E4%BD%99%3Cbr%3E%E2%86%92%20%E5%8E%8B%E7%BC%A9%2F%E6%91%98%E8%A6%81%5D%0A%20%20%20%20%20%20%20%20P%5BLLM%E5%B9%BB%E8%A7%89%3Cbr%3E%E2%86%92%20%E5%BC%95%E7%94%A8%E6%BA%AF%E6%BA%90%5D%0A%20%20%20%20end%0A%0A%20%20%20%20B%20--%20%E7%93%B6%E9%A2%88%20--%3E%20L%0A%20%20%20%20D%20--%20%E7%93%B6%E9%A2%88%20--%3E%20M%0A%20%20%20%20F%20--%20%E7%93%B6%E9%A2%88%20--%3E%20N%0A%20%20%20%20H%20--%20%E7%93%B6%E9%A2%88%20--%3E%20O%0A%20%20%20%20J%20--%20%E7%93%B6%E9%A2%88%20--%3E%20P%0A"})]),fallback:E(()=>[...s[2]||(s[2]=[a(" Loading... ",-1)])]),_:1})),s[18]||(s[18]=i("h4",{id:"_2-2-高级检索模式详解",tabindex:"-1"},[a("2.2 高级检索模式详解 "),i("a",{class:"header-anchor",href:"#_2-2-高级检索模式详解","aria-label":'Permalink to "2.2 高级检索模式详解"'},"​")],-1)),i("ul",null,[s[7]||(s[7]=l("<li><p><strong>混合检索 (Hybrid Search)</strong></p><ul><li><strong>工作原理</strong>: 同时执行<strong>向量搜索</strong>（语义相似）和<strong>全文搜索</strong>（关键词匹配），然后将两者的结果集进行<strong>融合重排</strong>（如使用 Reciprocal Rank Fusion - RRF 算法）。</li><li><strong>优势</strong>: 兼顾召回率（Recall）和精确率（Precision）。既能找到语义相关但没出现关键词的文档，也能精准命中含有关键词的段落。</li></ul></li>",1)),i("li",null,[s[4]||(s[4]=i("p",null,[i("strong",null,"智能体化检索 (Agentic RAG)"),a(" 这是 RAG 的终极形态，将检索的控制权交给 LLM 本身。")],-1)),(t(),e(h,null,{default:E(()=>[r(n,{id:"mermaid-189",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E5%A4%8D%E6%9D%82%E9%97%AE%E9%A2%98%5D%20--%3E%20B%5BLLM%E5%88%86%E6%9E%90%3Cbr%3E%E7%94%9F%E6%88%90%E6%90%9C%E7%B4%A2%E7%AD%96%E7%95%A5%5D%0A%20%20%20%20B%20--%3E%20C%5B%E7%94%9F%E6%88%90%E6%90%9C%E7%B4%A2%E6%9F%A5%E8%AF%A21%5D%0A%20%20%20%20C%20--%3E%20D%5B%E6%89%A7%E8%A1%8C%E6%A3%80%E7%B4%A2%5D%0A%20%20%20%20D%20--%3E%20E%5B%E8%AF%84%E4%BC%B0%E7%BB%93%E6%9E%9C%5D%0A%20%20%20%20E%20--%20%E4%B8%8D%E5%85%85%E5%88%86%20--%3E%20B%0A%20%20%20%20E%20--%20%E5%85%85%E5%88%86%20--%3E%20F%5B%E5%90%88%E6%88%90%E6%9C%80%E7%BB%88%E7%AD%94%E6%A1%88%5D%0A%20%20%20%20B%20--%3E%20G%5B%E7%94%9F%E6%88%90%E6%90%9C%E7%B4%A2%E6%9F%A5%E8%AF%A22%5D%0A%20%20%20%20G%20--%3E%20D%0A"})]),fallback:E(()=>[...s[3]||(s[3]=[a(" Loading... ",-1)])]),_:1})),s[5]||(s[5]=i("p",null,[i("strong",null,"示例"),a(": 用户问“我们的竞争对手产品 Y 最近有什么动态？”。LLM 可能自主生成多条查询策略：")],-1)),s[6]||(s[6]=i("ol",null,[i("li",null,[i("code",null,"“竞争对手Y 最新产品发布”"),a(" (搜索新闻)")]),i("li",null,[i("code",null,"“Y公司 财报 2024”"),a(" (搜索财经文档)")]),i("li",null,[i("code",null,"“产品Y 用户评价”"),a(" (搜索社区论坛) 它会持续检索、评估，直到认为自己掌握了足够的信息来回答。")])],-1))])]),s[19]||(s[19]=l('<hr><h3 id="模块三-工具使用-深度拆解" tabindex="-1">模块三：工具使用 - 深度拆解 <a class="header-anchor" href="#模块三-工具使用-深度拆解" aria-label="Permalink to &quot;模块三：工具使用 - 深度拆解&quot;">​</a></h3><p>工具是 Agent 的“手脚”，其设计直接关系到系统的<strong>能力、安全性和可靠性</strong>。</p><h4 id="_3-1-工具设计的-solid-原则" tabindex="-1">3.1 工具设计的“SOLID”原则 <a class="header-anchor" href="#_3-1-工具设计的-solid-原则" aria-label="Permalink to &quot;3.1 工具设计的“SOLID”原则&quot;">​</a></h4><p>借鉴软件工程的思想，优秀的工具设计应遵循：</p><ul><li><strong>单一职责原则 (Single Responsibility)</strong>: 如 <code>send_email</code> 工具只负责发送邮件，不应包含编辑邮件内容的功能。</li><li><strong>开闭原则 (Open/Closed)</strong>: 工具的功能应该是扩展的（通过添加新工具），而非修改已有的工具。</li><li><strong>清晰接口原则</strong>: 工具的描述（name, description, parameters）就是它的 API 文档，必须对人类和机器都清晰易懂。</li><li><strong>无状态原则</strong>: 工具调用 ideally 应该是无状态的，输出只由输入决定，这简化了错误重试和调试。</li></ul><h4 id="_3-2-mcp-model-context-protocol-详解" tabindex="-1">3.2 MCP (Model Context Protocol) 详解 <a class="header-anchor" href="#_3-2-mcp-model-context-protocol-详解" aria-label="Permalink to &quot;3.2 MCP (Model Context Protocol) 详解&quot;">​</a></h4><p>MCP 是一个<strong>客户端-服务器协议</strong>，它解决了“每个 AI 应用都要重复造一遍工具连接轮子”的问题。</p>',8)),(t(),e(h,null,{default:E(()=>[r(n,{id:"mermaid-253",class:"mermaid",graph:"flowchart%20LR%0A%20%20%20%20App%5BAI%E5%BA%94%E7%94%A8%3Cbr%3EMCP%20Client%5D%20%3C--%20JSON-RPC%20over%20STDIO%2FWebSocket%20--%3E%20Server%5BMCP%20Server%3Cbr%3E%E5%B7%A5%E5%85%B7%E6%8F%90%E4%BE%9B%E5%95%86%5D%0A%0A%20%20%20%20subgraph%20ServerImplementation%20%5BMCP%20Server%E5%AE%9E%E7%8E%B0%5D%0A%20%20%20%20%20%20%20%20direction%20TB%0A%20%20%20%20%20%20%20%20S1%5B%E5%B7%A5%E5%85%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20S2%5B%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20S3%5B%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8%5D%0A%20%20%20%20%20%20%20%20S4%5B%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B7%A5%E5%85%B7%E6%9C%8D%E5%8A%A1%E5%99%A8%5D%0A%20%20%20%20end%0A%0A%20%20%20%20Server%20--%20%E7%AE%A1%E7%90%86%20--%3E%20ServerImplementation%0A%0A%20%20%20%20ServerImplementation%20--%20%E6%8F%90%E4%BE%9B%E8%AE%BF%E9%97%AE%20--%3E%20Resources%5B(%E5%B7%A5%E5%85%B7%E3%80%81%E6%96%87%E4%BB%B6%E3%80%81%E6%95%B0%E6%8D%AE...)%5D%0A"})]),fallback:E(()=>[...s[8]||(s[8]=[a(" Loading... ",-1)])]),_:1})),s[20]||(s[20]=l('<ul><li><strong>工作方式</strong>: AI 应用（Client）启动时连接到 MCP Server。Server 告诉 Client“我这里提供了哪些工具（函数）和资源（数据源）”。Client 在需要时通过 JSON-RPC 调用 Server 提供的工具。</li><li><strong>巨大优势</strong>: <ol><li><strong>解耦</strong>: AI 应用与工具实现完全分离，可以独立开发和更新。</li><li><strong>标准化</strong>: 任何实现了 MCP 协议的工具，都可以被任何支持 MCP 的 AI 应用使用。</li><li><strong>安全性</strong>: 工具运行在独立的 Server 进程中，权限更容易控制。</li></ol></li></ul><hr><h3 id="模块四-智能体规划与协作-深度拆解" tabindex="-1">模块四：智能体规划与协作 - 深度拆解 <a class="header-anchor" href="#模块四-智能体规划与协作-深度拆解" aria-label="Permalink to &quot;模块四：智能体规划与协作 - 深度拆解&quot;">​</a></h3><p>多智能体系统是一个<strong>分布式系统</strong>，需要解决规划、通信、协调等经典分布式问题。</p><h4 id="_4-1-智能体内部推理循环-react-模式" tabindex="-1">4.1 智能体内部推理循环：ReAct 模式 <a class="header-anchor" href="#_4-1-智能体内部推理循环-react-模式" aria-label="Permalink to &quot;4.1 智能体内部推理循环：ReAct 模式&quot;">​</a></h4><p>这是单个智能体做决策的<strong>核心算法循环</strong>，完美体现了“思考-行动”的结合。</p>',6)),(t(),e(h,null,{default:E(()=>[r(n,{id:"mermaid-296",class:"mermaid",graph:"flowchart%20TD%0A%20%20%20%20A%5B%E6%80%9D%E8%80%83%20Thought%5D%20--%3E%20B%5B%E8%AF%84%E4%BC%B0%E5%BD%93%E5%89%8D%E7%8A%B6%E6%80%81%3Cbr%3E%E5%88%86%E6%9E%90%E4%B8%8B%E4%B8%80%E6%AD%A5%5D%0A%20%20%20%20B%20--%3E%20C%5B%E8%A1%8C%E5%8A%A8%20Action%5D%3Cbr%3E%E8%B0%83%E7%94%A8%E5%B7%A5%E5%85%B7%2F%E7%94%9F%E6%88%90%E5%9B%9E%E5%A4%8D%0A%20%20%20%20C%20--%3E%20D%5B%E8%A7%82%E5%AF%9F%20Observation%5D%3Cbr%3E%E8%8E%B7%E5%8F%96%E5%B7%A5%E5%85%B7%E7%BB%93%E6%9E%9C%2F%E7%94%A8%E6%88%B7%E5%8F%8D%E9%A6%88%0A%20%20%20%20D%20--%3E%20E%7B%E4%BB%BB%E5%8A%A1%E5%AE%8C%E6%88%90%3F%7D%0A%20%20%20%20E%20--%20%E5%90%A6%20--%3E%20A%0A%20%20%20%20E%20--%20%E6%98%AF%20--%3E%20F%5B%E8%BE%93%E5%87%BA%E6%9C%80%E7%BB%88%E7%BB%93%E6%9E%9C%5D%0A"})]),fallback:E(()=>[...s[9]||(s[9]=[a(" Loading... ",-1)])]),_:1})),s[21]||(s[21]=l(`<p><strong>代码示例 (ReAct 循环伪代码):</strong></p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> react_loop</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(initial_task):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> initial_task</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> step </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MAX_STEPS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 思考：生成下一步计划</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        prompt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;基于当前上下文，你的下一步思考和行动是什么？上下文：</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        reasoning </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> llm.generate(prompt)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 决定行动：是结束，还是调用工具？</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;最终答案&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> reasoning:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> extract_final_answer(reasoning)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 解析出要调用的工具和参数</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            tool_name, params </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> parse_tool_call(reasoning)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 执行行动</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> call_tool(tool_name, params)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # 观察：将结果纳入上下文</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            context </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">行动结果: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">result</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;任务超时失败&quot;</span></span></code></pre></div><h4 id="_4-2-多智能体协作架构模式" tabindex="-1">4.2 多智能体协作架构模式 <a class="header-anchor" href="#_4-2-多智能体协作架构模式" aria-label="Permalink to &quot;4.2 多智能体协作架构模式&quot;">​</a></h4><h5 id="模式一-主从模式-manager-worker" tabindex="-1">模式一：主从模式 (Manager-Worker) <a class="header-anchor" href="#模式一-主从模式-manager-worker" aria-label="Permalink to &quot;模式一：主从模式 (Manager-Worker)&quot;">​</a></h5><ul><li><strong>架构</strong>: 一个<strong>管理智能体</strong>（Manager）负责接收任务、制定规划、分解子任务并分配给多个<strong>工作智能体</strong>（Worker），最后汇总结果。</li><li><strong>优点</strong>: 结构清晰，易于控制和调试。</li><li><strong>缺点</strong>: Manager 容易成为性能和单点故障的瓶颈。</li></ul><h5 id="模式二-平等协作模式-swarm" tabindex="-1">模式二：平等协作模式 (Swarm) <a class="header-anchor" href="#模式二-平等协作模式-swarm" aria-label="Permalink to &quot;模式二：平等协作模式 (Swarm)&quot;">​</a></h5><ul><li><strong>架构</strong>: 多个智能体地位平等，通过<strong>共享工作区</strong>（Blackboard）或<strong>消息总线</strong>进行通信。智能体&quot;监听&quot;与自己相关的任务，自主&quot;认领&quot;并执行。</li><li><strong>优点</strong>: 去中心化，扩展性强，容错性好。</li><li><strong>缺点</strong>: 系统行为更复杂，难以预测和调试。</li></ul><h5 id="模式三-流水线模式-pipeline" tabindex="-1">模式三：流水线模式 (Pipeline) <a class="header-anchor" href="#模式三-流水线模式-pipeline" aria-label="Permalink to &quot;模式三：流水线模式 (Pipeline)&quot;">​</a></h5><ul><li><strong>架构</strong>: 任务像流水线一样被处理，每个智能体完成一道特定工序，然后将结果传递给下一个智能体。</li><li><strong>优点</strong>: 高效率，适合流程固定的任务。</li><li><strong>缺点</strong>: 不灵活，一个环节失败会导致整个流水线中断。</li></ul><h3 id="总结-工程化的思维框架" tabindex="-1">总结：工程化的思维框架 <a class="header-anchor" href="#总结-工程化的思维框架" aria-label="Permalink to &quot;总结：工程化的思维框架&quot;">​</a></h3><p>这篇指南的伟大之处在于，它提供了<strong>一整套构建 AI 系统的思维框架和工具箱</strong>：</p><ol><li><strong>分而治之</strong>: 用<strong>提示链</strong>和<strong>多智能体</strong>分解复杂问题。</li><li><strong>依赖注入</strong>: 用<strong>RAG</strong>和<strong>工具</strong>为 LLM 注入知识和能力。</li><li><strong>标准化接口</strong>: 用<strong>结构化输出</strong>和<strong>MCP</strong>定义清晰的人机、机机协作契约。</li><li><strong>控制流</strong>: 用<strong>路由</strong>和<strong>规划器</strong>管理复杂的逻辑流程。</li><li><strong>持续改进</strong>: 通过<strong>评估</strong>和<strong>反思</strong>环节，让整个系统能够从错误中学习并优化。</li></ol><p>它标志着 AI 开发从“炼金术”走向了“工程学”。开发者不再是漫无目的地提示 LLM，而是像建筑师一样，精心设计和组装这些模块化的组件，最终构建出稳定、强大、可预测的 AI 应用系统。</p>`,13))])}const c=o(k,[["render",B]]);export{D as __pageData,c as default};
